<!DOCTYPE html>
<HTML>
	<HEAD>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="Content-Language" content="ja" />
		<link rel="stylesheet" type="text/css" href="csv_viewer.css" media="all">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/encoding-japanese/1.0.29/encoding.min.js"></script>
		<script src="csv_viewer.js"></script>
	</HEAD>
	<BODY>
		<p>
			<select id="split_type">
				<option value="カンマ" selected>カンマ</option>
				<option value="タブ">タブ</option>
			</select>
			で区切られたCSVファイルとして取り扱います。
		</p>
		<p>
			文字コードは
			<select id="encode_type">
				<option value="Shift_JIS" selected>Shift_JIS</option>
				<option value="utf-8">utf-8</option>
			</select>
			で、ヘッダ行が
			<select id="header_display">
				<option value="ON" selected>あります。</option>
				<option value="OFF">ありません。</option>
			</select>
		</p>
		<div id="input_area">
			<p>
				<input type="file" id="load_file_btn" data-name="inputfile">
			</p>
			<div id="drop_zone">Drop files here</div>
		</div>
		<output id="list"></output>	
		<p id="download_area">
			<select id="dl_split_type">
				<option value="カンマ" selected>カンマ</option>
				<option value="タブ">タブ</option>
			</select>
			で区切られた
			<select id="dl_encode_type">
				<option value="Shift_JIS" selected>Shift_JIS</option>
				<option value="utf-8">utf-8</option>
			</select>
			の文字コード、ファイル名は
			<input type="text" id="dl_filename" value="sample.csv"></textarea>
			で
			<a id="download" href="#" download="test.csv" onclick="handleDownload()">ダウンロード</a>
			します。
		</p>
		<div class="scroll_div">
			<output id="mytable"></output>
		</div>

		<script>
			// Setup the dnd listeners.
			let dropZone = document.getElementById('drop_zone')
			dropZone.addEventListener('dragover', handleDragOver, false)
			dropZone.addEventListener('drop', handleFileSelect, false)

			let input_file = document.getElementById("load_file_btn")
			input_file.addEventListener('change', handleFileChange, false)

			let split_type = document.getElementById("split_type")
			split_type.addEventListener('change', handleSplitTypeChange, false)
			let encode_type = document.getElementById("encode_type")
			encode_type.addEventListener('change', handleEncodeTypeChange, false)
			let header_display = document.getElementById("header_display")
			header_display.addEventListener('change', handleHeaderExistsChange, false)

			// First drow is download no display.
			document.getElementById("download_area").classList.add('no-display')
		</script>

	</BODY>
</HTML>
